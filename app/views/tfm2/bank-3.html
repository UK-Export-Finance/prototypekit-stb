{% extends "govuk-prototype-kit/layouts/govuk-branded.html" %}

{% block pageTitle %}
{{ data['bank-13-name'] }} – {{ data['report-month'] }} report – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block header %}
  {% include "includes/head.html" %}
  {% include "includes/primary-nav-banks.html" %}
{% endblock %}

{% block pageScripts %}
  {% include "includes/scripts.html" %}
{% endblock %}

{% block content %}
<div class="govuk-grid-row">

    <div class="ukef-grid-column-one-seventh">
            <nav class="moj-side-navigation" aria-label="Side navigation">
                <h4 class="moj-side-navigation__title">2023</h4>
                <ul class="moj-side-navigation__list">
                    <li class="moj-side-navigation__item moj-side-navigation__item--active">
                    <a href="#" aria-current="location">{{ data['report-month-only'] }}</a>
                    </li>
            
                    <li class="moj-side-navigation__item">
                    <a href="#">{{ data['last-month-only'] }}</a>
                    </li>
            
                    <li class="moj-side-navigation__item">
                    <a href="#">{{ data['3rd-month-only'] }}</a>
                    </li>
    
                    <li class="moj-side-navigation__item">
                    <a href="#">{{ data['4th-month-only'] }}</a>
                    </li>
                    <li class="moj-side-navigation__item">
                      <a href="#">February</a>
                    </li>
                    <li class="moj-side-navigation__item">
                      <a href="#">January</a>
                    </li>
                </ul>

          </nav>
      

    </div>

  <div class="ukef-grid-column-six-seventh">
    
    <h1 class="govuk-heading-xl govuk-!-margin-bottom-6">
      {{ data['bank-13-name'] }}
    </h1>
    <h2 class="govuk-heading-l">
      {{ data['report-month'] }}
    </h2> 
    <div class="govuk-tabs" data-module="govuk-tabs">
        <h2 class="govuk-tabs__title">
          Contents
        </h2>
        <ul class="govuk-tabs__list">
          <li class="govuk-tabs__list-item govuk-tabs__list-item--selected">
            <a class="govuk-tabs__tab" href="#report">
              Bank report
            </a>
          </li>
          <li class="govuk-tabs__list-item">
            <a class="govuk-tabs__tab" href="#reconciliation">
              Reconciliation
            </a>
          </li>
          <li class="govuk-tabs__list-item">
            <a class="govuk-tabs__tab" href="#payments-received">
              Payments received
            </a>
          </li>
        </ul>
        
        <div class="govuk-tabs__panel" id="report">

          <h2 class="govuk-heading-l">Bank report</h2>
          

          <table class="govuk-table" data-module="moj-sortable-table">
            <caption class="govuk-table__caption govuk-table__caption--l"></caption>
            <thead class="govuk-table__head">
              <tr class="govuk-table__row">
                <th scope="col" class="govuk-table__header" aria-sort="ascending">Facility ID</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">Exporter</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">Value</th>  
                <th scope="col" class="govuk-table__header" aria-sort="none">Utilisation</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">UKEF cover</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">UKEF exposure</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">Fees accrued</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">Fee payable to UKEF</th>
              </tr>
            </thead>
            <tbody class="govuk-table__body">
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-16-ukef-id'] }}"><a href="#">{{ data['facility-16-ukef-id'] }}</a></th>
                <td class="govuk-table__cell">{{ data['facility-16-name'] }}</td>
                <td class="govuk-table__cell" data-sort-value="600000">GBP {{ data['facility-16-limit'] }}</td>
                <td class="govuk-table__cell" data-sort-value="400000">GBP {{ data['facility-16-utilisation'] }}</td>
                <td class="govuk-table__cell">{{ data['facility-16-cover'] }}</td>
                <td class="govuk-table__cell" data-sort-value="320000">GBP {{ data['facility-16-exposure'] }}</td>
                <td class="govuk-table__cell" data-sort-value="10000">GBP {{ data['facility-16-accrued'] }} </td>
                <td class="govuk-table__cell" data-sort-value="1000">GBP {{ data['facility-16-paid'] }} </td>
              </tr>
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-17-ukef-id'] }}"><a href="#">{{ data['facility-17-ukef-id'] }}</a></th>
                <td class="govuk-table__cell">{{ data['facility-17-name'] }}</td>
                <td class="govuk-table__cell" data-sort-value="300000">GBP {{ data['facility-17-limit'] }}</td>
                <td class="govuk-table__cell" data-sort-value="125000">GBP {{ data['facility-17-utilisation'] }}</td>
                <td class="govuk-table__cell">{{ data['facility-17-cover'] }}</td>
                <td class="govuk-table__cell" data-sort-value="100000">GBP {{ data['facility-17-exposure'] }}</td>
                <td class="govuk-table__cell" data-sort-value="3600">GBP {{ data['facility-17-accrued'] }} </td>
                <td class="govuk-table__cell" data-sort-value="800">GBP {{ data['facility-17-paid'] }} </td>
              </tr>
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-17-ukef-id'] }}"><a href="#">{{ data['facility-17-ukef-id'] }}</a></th>
                <td class="govuk-table__cell">{{ data['facility-17-name'] }}</td>
                <td class="govuk-table__cell" data-sort-value="800000">EUR {{ data['facility-17-limit'] }}</td>
                <td class="govuk-table__cell" data-sort-value="200000">EUR {{ data['facility-17-utilisation'] }}</td>
                <td class="govuk-table__cell">{{ data['facility-17-cover'] }}</td>
                <td class="govuk-table__cell" data-sort-value="160000">EUR {{ data['facility-17-exposure'] }}</td>
                <td class="govuk-table__cell" data-sort-value="50000">EUR {{ data['facility-17B-accrued'] }} </td>
                <td class="govuk-table__cell" data-sort-value="2000">EUR {{ data['facility-17B-paid'] }} </td>
              </tr>
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-18-ukef-id'] }}"><a href="#">{{ data['facility-18-ukef-id'] }}</a></th>
                <td class="govuk-table__cell">{{ data['facility-18-name'] }}</td>
                <td class="govuk-table__cell" data-sort-value="800000">EUR {{ data['facility-18-limit'] }}</td>
                <td class="govuk-table__cell" data-sort-value="200000">EUR {{ data['facility-18-utilisation'] }}</td>
                <td class="govuk-table__cell">{{ data['facility-18-cover'] }}</td>
                <td class="govuk-table__cell" data-sort-value="160000">EUR {{ data['facility-18-exposure'] }}</td>
                <td class="govuk-table__cell" data-sort-value="50000">EUR {{ data['facility-18-accrued'] }} </td>
                <td class="govuk-table__cell" data-sort-value="2000">EUR {{ data['facility-18-paid'] }} </td>
              </tr>
            </tbody>
          </table>
          </div>
        <!-- end of report tab -->
        
        <div class="govuk-tabs__panel govuk-tabs__panel--hidden" id="reconciliation">
          
          {% if 'no' in data['bank-13-start'] %}

          <!-- Show this by deafault: enabling reconciling to start. Always goes to bulk payment option -->
           <form class="form" action="bank-3#reconciliation" method="get">

              <div class="govuk-grid-row">
                  <div class="govuk-grid-column-two-thirds">
                      
                  <div class="govuk-form-group">
                      <fieldset class="govuk-fieldset">
                        <legend class="govuk-fieldset__legend--m">
                          Have any payments been received?
                        </legend>
                        <div class="govuk-radios govuk-radios--small" data-module="govuk-radios">
                          <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="Yes" name="bank-13-received" type="radio" value="Yes" data-aria-controls="conditional-yes">
                            <label class="govuk-label govuk-radios__label" for="Yes">
                              Yes
                            </label>
                          </div>
                          
                          <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="Not-yet" name="bank-13-received" type="radio" value="No">
                            <label class="govuk-label govuk-radios__label" for="Not-yet">
                              No
                            </label>
                          </div>
          
                        </div>
                      </fieldset>
                    </div>
          
                  </div>
              </div>
          
              <button class="govuk-button" data-module="govuk-button">
              Continue
              </button>
              <input type="hidden" name="bank-13-start" value="yes">
              
            </form>

            {% elif 'yes' in data['bank-13-start'] %}
            <!-- Show this when ready to start reconciliing -->
            
            <h2 class="govuk-heading-l">Reported fees to reconcile</h2>

            <!--<h2 class="govuk-heading-l">All reported fees reconciled</h2>-->
            
            <table class="govuk-table" data-module="moj-multi-select" data-module="" data-multi-select-checkbox="#select-all">
              <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                  <th class="govuk-table__header govuk-!-padding-top-0" scope="col" id="select-all"></th>
                  <th scope="col" class="govuk-table__header" aria-sort="ascending">Facility ID</th>
                  <th scope="col" class="govuk-table__header" aria-sort="none">Exporter</th>
                  <th scope="col" class="govuk-table__header" aria-sort="none">Base currency</th>
                  <th scope="col" class="govuk-table__header" aria-sort="none">Reported fee payable<br>(currency reported in)</th>
                  <th scope="col" class="govuk-table__header" aria-sort="none">Payment fee marked against</th>
                  <th scope="col" class="govuk-table__header" aria-sort="none">Status</th>            
                </tr>
              </thead>
              <tbody class="govuk-table__body">
                <tr class="govuk-table__row govuk-table__row--selected">
                  <td class="govuk-table__cell govuk-!-padding-top-0 govuk-!-padding-bottom-0">
                    <div class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                      <input type="checkbox" class="govuk-checkboxes__input" id="{{ data['facility-16-ukef-id'] }}">
                      <label class="govuk-label govuk-checkboxes__label" for="{{ data['facility-16-ukef-id'] }}">
                        <span class="govuk-visually-hidden">{{ data['facility-16-ukef-id'] }}</span>
                      </label>
                    </div>
                  </td>
                  <td class="govuk-table__cell" data-sort-value="{{ data['facility-16-ukef-id'] }}">{{ data['facility-16-ukef-id'] }}</td>
                  <td class="govuk-table__cell">{{ data['facility-16-name'] }}</td>
                  <td class="govuk-table__cell">{{ data['facility-16-currency'] }}</td>
                  <td class="govuk-table__cell">
                    GBP {{ data['facility-16-paid'] }}
                  </td>
                  <td class="govuk-table__cell">
                    
                  </td>
                  <td class="govuk-table__cell">
                    <strong class="govuk-tag">To do</strong>
                  </td>
                </tr>

                <tr class="govuk-table__row govuk-table__row--selected">
                  <td class="govuk-table__cell govuk-!-padding-top-0 govuk-!-padding-bottom-0">
                    <div class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                      <input type="checkbox" class="govuk-checkboxes__input" id="{{ data['facility-17-ukef-id'] }}">
                      <label class="govuk-label govuk-checkboxes__label" for="{{ data['facility-17-ukef-id'] }}">
                        <span class="govuk-visually-hidden">{{ data['facility-17-ukef-id'] }}</span>
                      </label>
                    </div>
                  </td>
                  <td class="govuk-table__cell" data-sort-value="{{ data['facility-17-ukef-id'] }}">{{ data['facility-17-ukef-id'] }}</td>
                  <td class="govuk-table__cell">{{ data['facility-17-name'] }}</td>
                  <td class="govuk-table__cell">{{ data['facility-17-currency'] }}</td>
                  <td class="govuk-table__cell">
                    USD {{ data['facility-17-paid'] }}
                  </td>
                  <td class="govuk-table__cell">
                    
                  </td>
                  <td class="govuk-table__cell">
                    <strong class="govuk-tag">To do</strong>
                  </td>
                </tr>

                <tr class="govuk-table__row govuk-table__row--selected">
                    <td class="govuk-table__cell govuk-!-padding-top-0 govuk-!-padding-bottom-0">
                      <div class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                        <input type="checkbox" class="govuk-checkboxes__input" id="{{ data['facility-17-ukef-id'] }}">
                        <label class="govuk-label govuk-checkboxes__label" for="{{ data['facility-17-ukef-id'] }}">
                          <span class="govuk-visually-hidden">{{ data['facility-17-ukef-id'] }}</span>
                        </label>
                      </div>
                    </td>
                    <td class="govuk-table__cell" data-sort-value="{{ data['facility-17-ukef-id'] }}">{{ data['facility-17-ukef-id'] }}</td>
                    <td class="govuk-table__cell">{{ data['facility-17-name'] }}</td>
                    <td class="govuk-table__cell">{{ data['facility-17-currency'] }}</td>
                    <td class="govuk-table__cell">
                      EUR {{ data['facility-17B-paid'] }}
                    </td>
                    <td class="govuk-table__cell">
                      
                    </td>
                    <td class="govuk-table__cell">
                      <strong class="govuk-tag">To do</strong>
                    </td>
                  </tr>

                <tr class="govuk-table__row">
                  <td class="govuk-table__cell govuk-!-padding-top-0 govuk-!-padding-bottom-0">
                    <div class="govuk-checkboxes__item govuk-checkboxes--small moj-multi-select__checkbox">
                      <input type="checkbox" class="govuk-checkboxes__input" id="{{ data['facility-18-ukef-id'] }}">
                      <label class="govuk-label govuk-checkboxes__label" for="{{ data['facility-18-ukef-id'] }}">
                        <span class="govuk-visually-hidden">{{ data['facility-18-ukef-id'] }}</span>
                      </label>
                    </div>
                  </td>
                  <td class="govuk-table__cell" data-sort-value="{{ data['facility-18-ukef-id'] }}">{{ data['facility-18-ukef-id'] }}</td>
                  <td class="govuk-table__cell">{{ data['facility-18-name'] }}</td>
                  <td class="govuk-table__cell">{{ data['facility-18-currency'] }}</td>
                  <td class="govuk-table__cell">
                    EUR {{ data['facility-18-paid'] }}
                  </td>
                  <td class="govuk-table__cell">
                   
                  </td>
                  <td class="govuk-table__cell">
                    <strong class="govuk-tag">To do</strong>
                  </td>
                </tr>

              </tbody>
              </table>
              

              <!-- Start view: displaying the radios to mark 1st 4 facilities-->
              <form class="form" action="bank-2-details#reconciliation" method="get">
              <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                  <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                    Mark selected:
                  </legend>
                  <div class="govuk-radios govuk-radios--small" data-module="govuk-radios">
                    <div class="govuk-radios__item">
                      <input class="govuk-radios__input" id="bulk" name="bank-13-received-how" type="radio" value="payment1">
                      <label class="govuk-label govuk-radios__label" for="bulk">
                        against a payment
                      </label>
                    </div>
                    <div class="govuk-radios__item">
                      <input class="govuk-radios__input" id="per-facility" name="bank-13-received-how" type="radio" value="not-paid">
                      <label class="govuk-label govuk-radios__label" for="per-facility">
                        as not paid
                      </label>
                    </div>
                    <div class="govuk-radios__item">
                      <input class="govuk-radios__input" id="per-facility" name="bank-13-received-how" type="radio" value="waiting">
                      <label class="govuk-label govuk-radios__label" for="per-facility">
                        as waiting for payment
                      </label>
                    </div>
                  </div>
                </fieldset>
              </div>

              {{ govukButton({
                text: "Continue"
              }) }}
              
            </form>

            {% endif %} 
    
  </div>

  <div class="govuk-tabs__panel govuk-tabs__panel--hidden" id="payments-received">
    
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
    
    <h2 class="govuk-heading-l">Payments received</h2>
    
    <!-- Start view: no payments reconciled-->
    
    <p class="govuk-body">No payments marked as received yet.</p>
    
    
    <!-- 2nd stage view: displaying the radios to mark last 2 facilities-->

    <h3 class="govuk-heading-m">Payment 1</h2>

    <dl class="govuk-summary-list">
    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">
        Payment received
      </dt>
      <dd class="govuk-summary-list__value">
        {{ data['bank-13-payment-bulk1'] }}
      </strong>
      </dd>
      <dd class="govuk-summary-list__actions">
        <a class="govuk-link" href="#">
          Change<span class="govuk-visually-hidden"> payment</span>
        </a>
      </dd>
    </div> 

    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">
        Date received
      </dt>
      <dd class="govuk-summary-list__value">
        {{ data['payment-date'] }}
      </dd>
      <dd class="govuk-summary-list__actions">
      </dd>
    </div> 
    
    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">
        Reconciled by
      </dt>
      <dd class="govuk-summary-list__value">
        {{ data['signed-in-name'] }}, {{ "today" | govukDate }} at {{ "now" | govukTime }}
      </dd>
      <dd class="govuk-summary-list__actions">
      </dd>
    </div>

  </dl>
  
 
  <h3 class="govuk-heading-m">Payment 2</h2>

    <dl class="govuk-summary-list">
    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">
        Payment received
      </dt>
      <dd class="govuk-summary-list__value">
        {{ data['bank-13-payment-bulk2'] }}
      </strong>
      </dd>
      <dd class="govuk-summary-list__actions">
        <a class="govuk-link" href="#">
          Change<span class="govuk-visually-hidden"> payment</span>
        </a>
      </dd>
    </div> 

    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">
        Date received
      </dt>
      <dd class="govuk-summary-list__value">
        {{ data['payment-date'] }}
      </dd>
      <dd class="govuk-summary-list__actions">
      </dd>
    </div> 
    
    <div class="govuk-summary-list__row">
      <dt class="govuk-summary-list__key">
        Reconciled by
      </dt>
      <dd class="govuk-summary-list__value">
        {{ data['signed-in-name'] }}, {{ "today" | govukDate }} at {{ "now" | govukTime }}
      </dd>
      <dd class="govuk-summary-list__actions">
      </dd>
    </div>

  </dl>
</div>
</div>

  </div>
</div>

{% endblock %}
