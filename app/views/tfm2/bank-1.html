{% extends "govuk-prototype-kit/layouts/govuk-branded.html" %}

{% block pageTitle %}
{{ data['bank-11-name'] }} – {{ data['report-month'] }} report – {{ serviceName }} – GOV.UK Prototype Kit
{% endblock %}

{% block header %}
  {% include "includes/head.html" %}
  {% include "includes/primary-nav-banks.html" %}
{% endblock %}

{% block pageScripts %}
  {% include "includes/scripts.html" %}
{% endblock %}

{% block content %}
<div class="govuk-grid-row">

    <div class="ukef-grid-column-one-seventh">
            <nav class="moj-side-navigation" aria-label="Side navigation">
                <h4 class="moj-side-navigation__title">2023</h4>
                <ul class="moj-side-navigation__list">
                    <li class="moj-side-navigation__item moj-side-navigation__item--active">
                    <a href="bank-1" aria-current="location">{{ data['report-month-only'] }}</a>
                    </li>
            
                    <li class="moj-side-navigation__item">
                    <a href="bank-1-month-2">{{ data['last-month-only'] }}</a>
                    </li>
            
                    <li class="moj-side-navigation__item">
                    <a href="bank-1-month-3">{{ data['3rd-month-only'] }}</a>
                    </li>
    
                    <li class="moj-side-navigation__item">
                    <a href="bank-1-month-4">{{ data['4th-month-only'] }}</a>
                    </li>
                    <li class="moj-side-navigation__item">
                      <a href="#">February</a>
                    </li>
                    <li class="moj-side-navigation__item">
                      <a href="#">January</a>
                    </li>
                </ul>

          </nav>
      

    </div>

  <div class="ukef-grid-column-six-seventh">
    
    <h1 class="govuk-heading-xl govuk-!-margin-bottom-6">
      {{ data['bank-11-name'] }}
    </h1>
    <h2 class="govuk-heading-l">
      {{ data['report-month'] }}
    </h2> 
    <div class="govuk-tabs" data-module="govuk-tabs">
        <h2 class="govuk-tabs__title">
          Contents
        </h2>
        <ul class="govuk-tabs__list">
          <li class="govuk-tabs__list-item govuk-tabs__list-item--selected">
            <a class="govuk-tabs__tab" href="#report">
              Report
            </a>
          </li>
          <li class="govuk-tabs__list-item">
            <a class="govuk-tabs__tab" href="#reconciliation">
              Reconciliation
            </a>
          </li>
        </ul>
        
        <div class="govuk-tabs__panel" id="report">

          <h2 class="govuk-heading-l">Bank report</h2>

          <table class="govuk-table" data-module="moj-sortable-table">
            <caption class="govuk-table__caption govuk-table__caption--l"></caption>
            <thead class="govuk-table__head">
              <tr class="govuk-table__row">
                <th scope="col" class="govuk-table__header" aria-sort="ascending">Facility ID</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">Exporter</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">Value</th>  
                <th scope="col" class="govuk-table__header" aria-sort="none">Utilisation</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">UKEF cover</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">UKEF exposure</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">Fees accrued</th>
                <th scope="col" class="govuk-table__header" aria-sort="none">Fee payable to UKEF</th>
              </tr>
            </thead>
            <tbody class="govuk-table__body">
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-1-ukef-id'] }}"><a href="facility1">{{ data['facility-1-ukef-id'] }}</a></th>
                <td class="govuk-table__cell">{{ data['facility-1-name'] }}</td>
                <td class="govuk-table__cell" data-sort-value="600000">GBP {{ data['facility-1-limit'] }}</td>
                <td class="govuk-table__cell" data-sort-value="400000">GBP {{ data['facility-1-utilisation'] }}</td>
                <td class="govuk-table__cell">{{ data['facility-1-cover'] }}</td>
                <td class="govuk-table__cell" data-sort-value="320000">GBP {{ data['facility-1-exposure'] }}</td>
                <td class="govuk-table__cell" data-sort-value="10000">GBP {{ data['facility-1-accrued'] }} </td>
                <td class="govuk-table__cell" data-sort-value="1000">GBP {{ data['facility-1-paid'] }} </td>
              </tr>
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-2-ukef-id'] }}"><a href="facility2">{{ data['facility-2-ukef-id'] }}</a></th>
                <td class="govuk-table__cell">{{ data['facility-2-name'] }}</td>
                <td class="govuk-table__cell" data-sort-value="300000">GBP {{ data['facility-2-limit'] }}</td>
                <td class="govuk-table__cell" data-sort-value="125000">GBP {{ data['facility-2-utilisation'] }}</td>
                <td class="govuk-table__cell">{{ data['facility-2-cover'] }}</td>
                <td class="govuk-table__cell" data-sort-value="100000">GBP {{ data['facility-2-exposure'] }}</td>
                <td class="govuk-table__cell" data-sort-value="3600">GBP {{ data['facility-2-accrued'] }} </td>
                <td class="govuk-table__cell" data-sort-value="800">GBP {{ data['facility-2-paid'] }} </td>
              </tr>
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-3-ukef-id'] }}"><a href="#">{{ data['facility-3-ukef-id'] }}</a></th>
                <td class="govuk-table__cell">{{ data['facility-3-name'] }}</td>
                <td class="govuk-table__cell" data-sort-value="800000">EUR {{ data['facility-3-limit'] }}</td>
                <td class="govuk-table__cell" data-sort-value="200000">EUR {{ data['facility-3-utilisation'] }}</td>
                <td class="govuk-table__cell">{{ data['facility-3-cover'] }}</td>
                <td class="govuk-table__cell" data-sort-value="160000">EUR {{ data['facility-3-exposure'] }}</td>
                <td class="govuk-table__cell" data-sort-value="50000">EUR {{ data['facility-3-accrued'] }} </td>
                <td class="govuk-table__cell" data-sort-value="2000">EUR {{ data['facility-3-paid'] }} </td>
              </tr>
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-4-ukef-id'] }}"><a href="#">{{ data['facility-4-ukef-id'] }}</a></th>
                <td class="govuk-table__cell">{{ data['facility-4-name'] }}</td>
                <td class="govuk-table__cell" data-sort-value="1500000">EUR {{ data['facility-4-limit'] }}</td>
                <td class="govuk-table__cell" data-sort-value="500000">EUR {{ data['facility-4-utilisation'] }}</td>
                <td class="govuk-table__cell">{{ data['facility-4-cover'] }}</td>
                <td class="govuk-table__cell" data-sort-value="400000">EUR {{ data['facility-4-exposure'] }}</td>  
                <td class="govuk-table__cell" data-sort-value="20000">EUR {{ data['facility-4-accrued'] }} </td>
                <td class="govuk-table__cell" data-sort-value="1800">EUR {{ data['facility-4-paid'] }} </td>
              </tr>
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-5-ukef-id'] }}"><a href="#">{{ data['facility-5-ukef-id'] }}</a></th>
                <td class="govuk-table__cell">{{ data['facility-5-name'] }}</td>
                <td class="govuk-table__cell" data-sort-value="2500000">USD {{ data['facility-5-limit'] }}</td>
                <td class="govuk-table__cell" data-sort-value="1900000">USD {{ data['facility-5-utilisation'] }}</td>
                <td class="govuk-table__cell">{{ data['facility-5-cover'] }}</td>
                <td class="govuk-table__cell" data-sort-value="1520000">USD {{ data['facility-5-exposure'] }}</td>
                <td class="govuk-table__cell" data-sort-value="50000">USD {{ data['facility-5-accrued'] }} </td>
                <td class="govuk-table__cell" data-sort-value="5000">USD {{ data['facility-5-paid'] }} </td>
              </tr>
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-6-ukef-id'] }}"><a href="#">{{ data['facility-6-ukef-id'] }}</a></th>
                <td class="govuk-table__cell">{{ data['facility-6-name'] }}</td>
                <td class="govuk-table__cell" data-sort-value="1000000">USD {{ data['facility-6-limit'] }}</td>
                <td class="govuk-table__cell" data-sort-value="790000">USD {{ data['facility-6-utilisation'] }}</td>
                <td class="govuk-table__cell">{{ data['facility-6-cover'] }}</td>
                <td class="govuk-table__cell" data-sort-value="632000">USD {{ data['facility-6-exposure'] }}</td>
                <td class="govuk-table__cell" data-sort-value="15000">USD {{ data['facility-6-accrued'] }} </td>
                <td class="govuk-table__cell" data-sort-value="1200">USD {{ data['facility-6-paid'] }} </td>
              </tr>
            </tbody>
          </table>
          </div>
        <!-- end of report tab -->

        

        <div class="govuk-tabs__panel govuk-tabs__panel--hidden" id="reconciliation">

          {% if 'no' in data['bank-11-start'] %}

           <form class="form" action="bank-1#reconciliation" method="get">

              <div class="govuk-grid-row">
                  <div class="govuk-grid-column-two-thirds">
                      
                  <div class="govuk-form-group">
                      <fieldset class="govuk-fieldset">
                        <legend class="govuk-fieldset__legend--m">
                          Have any payments been received?
                        </legend>
                        <div class="govuk-radios govuk-radios--small" data-module="govuk-radios">
                          <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="Yes" name="bank-2-payment" type="radio" value="Yes" data-aria-controls="conditional-yes">
                            <label class="govuk-label govuk-radios__label" for="Yes">
                              Yes
                            </label>
                          </div>
                          
                          <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="conditional-yes">

                            <div class="govuk-form-group">
                              <fieldset class="govuk-fieldset">
                                <legend class="govuk-fieldset__legend govuk-fieldset__legend--s">
                                  <h1 class="govuk-fieldset__heading">
                                    How have payments been received?
                                  </h1>
                                </legend>
                                <div class="govuk-radios govuk-radios--small" data-module="govuk-radios">
                                  <div class="govuk-radios__item">
                                    <input class="govuk-radios__input" id="changed-name" name="changed-name" type="radio" value="month">
                                    <label class="govuk-label govuk-radios__label" for="changed-name">
                                      Bulk payments per currency
                                    </label>
                                  </div>
                                  <div class="govuk-radios__item">
                                    <input class="govuk-radios__input" id="changed-name-2" name="changed-name" type="radio" value="year">
                                    <label class="govuk-label govuk-radios__label" for="changed-name-2">
                                      Payments per facility
                                    </label>
                                  </div>
                                </div>
                              </fieldset>
                            </div>
                            </div>


                          <div class="govuk-radios__item">
                            <input class="govuk-radios__input" id="Not-yet" name="bank-2-payment" type="radio" value="No">
                            <label class="govuk-label govuk-radios__label" for="Not-yet">
                              No
                            </label>
                          </div>
          
                        </div>
                      </fieldset>
                    </div>
          
                  </div>
              </div>
          
              <button class="govuk-button" data-module="govuk-button">
              Continue
              </button>
              <input type="hidden" name="bank-11-start" value="yes">
              
            </form>

            {% elif 'yes' in data['bank-11-start'] %}

            <h2 class="govuk-heading-l">Reported payments to reconcile</h2>
          
          <table class="govuk-table" data-module="moj-sortable-table">
            <caption class="govuk-table__caption govuk-table__caption--m">GBP</caption>
            <thead class="govuk-table__head">
              <tr class="govuk-table__row">
                <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="ascending">Facility ID</th>
                <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Exporter</th>
                <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Base currency</th>
                <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Reported fee</th>
                <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Payment received</th>
                <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Status</th>
              </tr>
            </thead>
            <tbody class="govuk-table__body">
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-1-ukef-id'] }}">{{ data['facility-1-ukef-id'] }}</th>
                <td class="govuk-table__cell">{{ data['facility-1-name'] }}</td>
                <td class="govuk-table__cell">{{ data['facility-1-currency'] }}</td>
                <td class="govuk-table__cell" data-sort-value="1000"><a href="bank-1-reconciliation">GBP {{ data['facility-1-paid'] }}</a></td>
                <td class="govuk-table__cell"></td>
                <td class="govuk-table__cell"><strong class="govuk-tag">To do</strong></td>
                
              </tr>
              <tr class="govuk-table__row">
                <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-2-ukef-id'] }}">{{ data['facility-2-ukef-id'] }}</th>
                <td class="govuk-table__cell">{{ data['facility-2-name'] }}</td>
                <td class="govuk-table__cell">{{ data['facility-2-currency'] }}</td>
                <td class="govuk-table__cell" data-sort-value="800"><a href="bank-1-reconciliation2">GBP {{ data['facility-2-paid'] }}</a></td>
                <td class="govuk-table__cell"></td>
                <td class="govuk-table__cell"><strong class="govuk-tag">To do</strong></td>
              </tr>
              <!--<tfoot>
                <tr class="govuk-table__row">
                  <th scope="row" class="govuk-table__header govuk-!-text-align-right" colspan="3">Total</th>
                  <td class="govuk-table__cell govuk-!-font-weight-bold" colspan="2">GBP 1,800.00</td>
                </tr>
              </tfoot>-->  
            </tbody>
            </table>

            <table class="govuk-table" data-module="moj-sortable-table">
                <caption class="govuk-table__caption govuk-table__caption--m">EUR</caption>
                <thead class="govuk-table__head">
                    <tr class="govuk-table__row">
                        <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="ascending">Facility ID</th>
                        <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Exporter</th>
                        <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Base currency</th>
                        <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Reported fee</th>
                        <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Payment received</th>
                        <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Status</th>
                      </tr>
                </thead>
                <tbody class="govuk-table__body">
                 
                  <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-3-ukef-id'] }}">{{ data['facility-3-ukef-id'] }}</th>
                    <td class="govuk-table__cell">{{ data['facility-3-name'] }}</td>
                    <td class="govuk-table__cell">{{ data['facility-3-currency'] }}</td>
                    <td class="govuk-table__cell" data-sort-value="2000"><a href="#">EUR {{ data['facility-3-paid'] }}</a></td>
                    <td class="govuk-table__cell">EUR 1,200.00<br>EUR 800.00</td>
                    <td class="govuk-table__cell"><strong class="govuk-tag govuk-tag--green">Payment matches</strong></td>
                  </tr>
                  <tr class="govuk-table__row">
                    <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-4-ukef-id'] }}">{{ data['facility-4-ukef-id'] }}</th>
                    <td class="govuk-table__cell">{{ data['facility-4-name'] }}</td>
                    <td class="govuk-table__cell">{{ data['facility-4-currency'] }}</td>
                    <td class="govuk-table__cell" data-sort-value="1800"><a href="#">EUR {{ data['facility-4-paid'] }}</a></td>
                    <td class="govuk-table__cell">EUR 1,800.00</td>
                    <td class="govuk-table__cell"><strong class="govuk-tag govuk-tag--green">Payment matches</strong></td>
                  </tr>
                  <!--<tfoot>
                    <tr class="govuk-table__row">
                      <th scope="row" class="govuk-table__header govuk-!-text-align-right" colspan="3">Total</th>
                      <td class="govuk-table__cell govuk-!-font-weight-bold" colspan="2">EUR 3,800.00</td>
                    </tr>
                  </tfoot>-->  
                </tbody>
                </table>

                <table class="govuk-table" data-module="moj-sortable-table">
                    <caption class="govuk-table__caption govuk-table__caption--m">USD</caption>
                    <thead class="govuk-table__head">
                        <tr class="govuk-table__row">
                            <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="ascending">Facility ID</th>
                            <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Exporter</th>
                            <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Base currency</th>
                            <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Reported fee</th>
                            <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Payment received</th>
                            <th scope="col" class="govuk-table__header govuk-width-one-sixth" aria-sort="none">Status</th>
                          </tr>
                    </thead>
                    <tbody class="govuk-table__body">
                      
                      <tr class="govuk-table__row">
                        <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-5-ukef-id'] }}">{{ data['facility-5-ukef-id'] }}</th>
                        <td class="govuk-table__cell">{{ data['facility-5-name'] }}</td>
                        <td class="govuk-table__cell">{{ data['facility-5-currency'] }}</td>
                        <td class="govuk-table__cell" data-sort-value="5000"><a href="#">USD {{ data['facility-5-paid'] }}</a></td>
                        <td class="govuk-table__cell">USD 1,100.00<br>EUR 700.00<br>GBP 300.00<br>USD 1,000.00</td>
                        <td class="govuk-table__cell"><strong class="govuk-tag govuk-tag--green">Payment matches</strong></td>
                      </tr>
                      <tr class="govuk-table__row">
                        <th scope="row" class="govuk-table__header govuk-!-font-weight-regular" data-sort-value="{{ data['facility-6-ukef-id'] }}">{{ data['facility-6-ukef-id'] }}</th>
                        <td class="govuk-table__cell">{{ data['facility-6-name'] }}</td>
                        <td class="govuk-table__cell">{{ data['facility-6-currency'] }}</td>
                        <td class="govuk-table__cell" data-sort-value="1200"><a href="#">USD {{ data['facility-6-paid'] }}</a></td>
                        <td class="govuk-table__cell">-</td>
                        <td class="govuk-table__cell"><strong class="govuk-tag govuk-tag--yellow">Payment Not received</strong></td>
                      </tr>
                    </tbody>
                    <!--<tfoot>
                      <tr class="govuk-table__row">
                        <th scope="row" class="govuk-table__header govuk-!-text-align-right" colspan="3">Total</th>
                        <td class="govuk-table__cell govuk-!-font-weight-bold" colspan="2">USD 7,200.00</td>
                      </tr>
                    </tfoot>-->  
                    </table>
    

        <!--end of form -->

          
          {% else %}

          <!-- Display reconciliation data -->

        <div class="govuk-grid-row">
          <div class="govuk-grid-column-two-thirds">

        <dl class="govuk-summary-list">
          
          <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              Reported fee payable
            </dt>
            <dd class="govuk-summary-list__value">
              GBP {{ data['bank-1-fee-payable'] }} 
            </dd>
          </div>  
          
          {% if 'Yes' in data['bank-1-payment'] %}
          <!-- It matches - display the reported bank fee payable -->
          <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              Payment received
            </dt>
            <dd class="govuk-summary-list__value">
              GBP {{ data['bank-1-fee-payable'] }} <strong class="govuk-tag govuk-tag--green govuk-!-margin-left-2">
                Payment matches
            </strong>
            </dd>
          </div> 
          
          {% else %}
          <!-- It doesn't match - display the fee received -->
          <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key govuk-!-width-one-third">
            Amount received
            </dt>
            <dd class="govuk-summary-list__value">
                GBP {{ data['bank1-amount-received'] }} <strong class="govuk-tag govuk-tag--yellow govuk-!-margin-left-2">
                  Payment does not match
              </strong>
            </dd>
          </div>
          {% endif %}


          <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              Date received
            </dt>
            <dd class="govuk-summary-list__value">
              {{ ( data['bank1-year'] + "-" + data['bank1-month'] + "-" + data['bank1-day'] ) | govukDate }}
            </dd>
          </div> 
          
          <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">
              Reconciled by
            </dt>
            <dd class="govuk-summary-list__value">
              {{ data['signed-in-name'] }}, {{ "today" | govukDate }} at {{ "now" | govukTime }}
            </dd>
          </div>

        </dl>

        <!--end of reconciliation data -->

          {% endif %}
        </div>
      </div>
  </div>
</div>

{% endblock %}
